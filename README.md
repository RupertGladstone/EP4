# Elmer/Ice Paraview Python Post-Processing utilities (EP4)

These functions were based on scripts generated within Paraview.  The general aim is to quickly produce a set of standard output plots without having to go through the Paraview interface.  Can be helpful if running on a remote HPC machine where connectivity may be a limiting factor.  Simply run the scripts then download a few plots instead of downloading the full set of .pvtu files.  

In some way these scripts can be see as an alternative to saving Paraview states.  In fact, it should be possible to run these within Paraview to provide a starting point for further editing.  Advantages compared to states include: plot files are generated by the scripts but can't be from states, and opening the Paraview GUI is not required.

A benefit of fully scripting plotting is reproducibility.  If using plots in presentations or publications the script can be re-run following modifications to quickl reproduce the required plots.

For more info, troubleshooting, or extending functionality, contact: RupertGladstone1972@gmail.com

To use these functions you need paraview python installed.
https://www.paraview.org/
https://www.paraview.org/python/

## To use these functions for a different region:

The default parameters are for PIG.

The camera properties and and x and y resolutions govern the region to be plotted.  In particular: 

The default view is looking down in which case 'cameraHeight' governs the zoom.

'camerax' and 'cameray' give the centre position for the plots.

'xres' and 'yres' determine the resoslution in the x and y directions.  Their ratio determines the width to height ratio of the resulting plot.


Some of the variable names are hard coded (e.g. velocity and groundedmask for the velocity and GL contours).

## To run:

cp EP4_defaultPlots.py EP4_myPlots.py

Edit the parameters in EP4_myPlots.py according to needs then run:

pvpython EP4_myPlots.py



## Parameter choices

The python dictionary containing parameters defines what should be plotted and certain properties of the plot.  The following parameters may be used.

#### 'mode' :

Plotting mode.  Options are 'singlefield' or 'difference plot' (NYI)

#### 'surface' :

On which surface to plot he main field variable, 'upper' or 'lower'

####    'fieldvars' :

Which field variables need to be loaded to make the plot.  In list form.  e.g. ['depth', 'groundedmask', 'velocity'],

#### 'fieldvar' :

The main field variable to be plotted in colour.  e.g. 'depth'

#### 'fieldvarLabel' : 

This is used as a name label on the colorbar.  tex may be used.  e.g. 'Depth, $m$'

#### 'fieldrange' : 

If this is given it defines the upper and lower limit for the colourbar values for the main field variable.  If not given the max and min values will be used. It should be alength 2 list. e.g. [-1000.0, 1000.0]

#### 'cameraHeight' : 

Height above zero at which the camera is positioned.  Reduce for more zoom in.  e.g. 500000.0

#### 'camerax' and 'cameray' : 

x and y locations for the centre of the plot, i.e. the point at which the camera points at (the camera points straight down).

#### 'xres' and 'yres' : 

x and y resolution of the output plot.

#### 'LSgeomID' and 'USgeomID' : 

Geometry IDs for the upper and lower surfaces as labelled in the pvtu files.

#### 'imgname' :

Output filename for completed plot.  Fulll path.

#### 'inputfname' : 

Input file name.  Full path.

#### 'velocityContours' : 

List of values for velocity contours.  e.g. [100.0, 1000.0],

#### 'fontSize' : 

Font size used in colour bar labelling.


